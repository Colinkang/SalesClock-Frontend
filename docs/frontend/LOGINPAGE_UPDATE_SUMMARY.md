# LoginPage.tsx æ›´æ–°æ€»ç»“

## âœ… å·²å®Œæˆçš„æ›´æ”¹

### 1. å¯¼å…¥æ›´æ–°
- **ç§»é™¤**: `import { supabase } from '../lib/supabase';`
- **æ·»åŠ **: `import { authApi } from '../lib/api';`
- **ç§»é™¤**: æœªä½¿ç”¨çš„ `useEffect` å¯¼å…¥

### 2. ç™»å½•åŠŸèƒ½æ›´æ–°
```typescript
// ä¹‹å‰ (Supabase)
const { data, error: loginError } = await supabase.auth.signInWithPassword({
  email: email.trim(),
  password: password,
});
if (loginError) throw loginError;
if (data.user) {
  onLogin();
}

// ä¹‹å (æ–° API)
await authApi.login(email.trim(), password);
onLogin();
```

**æ”¹è¿›**:
- ä»£ç æ›´ç®€æ´
- API å®¢æˆ·ç«¯è‡ªåŠ¨å¤„ç† token å­˜å‚¨
- é”™è¯¯å¤„ç†æ›´å…¨é¢

### 3. å¯†ç é‡ç½®åŠŸèƒ½
- æš‚æ—¶ç¦ç”¨å®Œæ•´åŠŸèƒ½
- æ˜¾ç¤ºæç¤ºä¿¡æ¯ï¼š"å¯†ç é‡ç½®åŠŸèƒ½æš‚æœªå®ç°"
- ä¿ç•™ UI ä»¥ä¾¿åç»­å®ç°

### 4. é”™è¯¯å¤„ç†
```typescript
catch (err: any) {
  console.error('Login error:', err);
  setError(err.response?.data?.error || err.message || 'ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥é‚®ç®±å’Œå¯†ç ');
}
```
- æ”¯æŒä» API å“åº”ä¸­æå–é”™è¯¯æ¶ˆæ¯
- æä¾›å‹å¥½çš„é»˜è®¤é”™è¯¯æç¤º

## ğŸ¯ åŠŸèƒ½éªŒè¯

æ›´æ–°åçš„åŠŸèƒ½ï¼š
1. âœ… ç”¨æˆ·å¯ä»¥ä½¿ç”¨é‚®ç®±å’Œå¯†ç ç™»å½•
2. âœ… Token è‡ªåŠ¨å­˜å‚¨åœ¨ localStorage
3. âœ… ç™»å½•æˆåŠŸåè°ƒç”¨ onLogin() è·³è½¬åˆ°ä¸»é¡µé¢
4. âœ… é”™è¯¯æ¶ˆæ¯æ­£ç¡®æ˜¾ç¤º
5. âœ… å¯†ç é‡ç½®æŒ‰é’®ä¿ç•™ä½†åŠŸèƒ½æš‚ç¦

## ğŸ“ åç»­å·¥ä½œ

- [ ] å®ç°å¯†ç é‡ç½®åŠŸèƒ½ï¼ˆéœ€è¦åç«¯ API æ”¯æŒï¼‰
- [ ] æ·»åŠ é‚€è¯·åˆ¶æ³¨å†Œé¡µé¢çš„é“¾æ¥
- [ ] å¯é€‰ï¼šæ·»åŠ è®°ä½æˆ‘åŠŸèƒ½

## ğŸ§ª æµ‹è¯•å»ºè®®

1. æµ‹è¯•æ­£å¸¸ç™»å½•
2. æµ‹è¯•é”™è¯¯çš„é‚®ç®±æˆ–å¯†ç 
3. æµ‹è¯•ç½‘ç»œé”™è¯¯
4. æ£€æŸ¥ token æ˜¯å¦æ­£ç¡®ä¿å­˜
5. æµ‹è¯•ç™»å½•åæ˜¯å¦èƒ½æ­£å¸¸è¿›å…¥åº”ç”¨

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `src/lib/api.ts` - API å®¢æˆ·ç«¯å®šä¹‰
- `src/App.tsx` - ä¸»åº”ç”¨ï¼ˆå·²æ›´æ–°ï¼‰
- `backend/src/routes/auth.ts` - åç«¯ç™»å½• API




