# 🧪 测试指南

## ✅ 当前状态

### 服务器状态
- ✅ 前端服务器运行中（端口 5173）
- ✅ 后端服务器运行中（端口 3001）
- ✅ 无 Lint 错误

### 已更新的页面
1. ✅ **App.tsx** - 使用新 API 认证
2. ✅ **LoginPage.tsx** - 登录功能
3. ✅ **CustomersPage.tsx** - 客户管理（完全更新）
4. ⏳ **PlansPage.tsx** - 拜访计划（部分更新）

## 🚀 测试步骤

### 1. 访问应用

打开浏览器访问：`http://localhost:5173`

### 2. 测试登录功能

使用以下账号登录：

**管理员账号**：
- 邮箱：`admin@example.com`
- 密码：`admin123456`

**测试用户账号**：
- 邮箱：`user@example.com`
- 密码：`user123456`

#### 预期结果
- ✅ 能成功登录
- ✅ 登录后自动保存 token
- ✅ 显示主界面

### 3. 测试客户页面（✅ 完全更新）

点击底部导航的"客户"选项

#### 3.1 查看客户列表
- ✅ 应该显示测试客户数据
- ✅ 应该显示"测试客户"（从数据库种子）

#### 3.2 添加新客户
- 点击"添加客户"按钮
- 填写信息：
  - 姓名：张三
  - 电话：13900000001
  - 地址：北京市朝阳区
  - 备注：测试客户

**预期结果**：
- ✅ 表单验证正常工作
- ✅ 添加成功后客户列表刷新
- ✅ 新客户出现在列表中

#### 3.3 查看客户详情
- 点击客户卡片
- 预期结果：
  - ✅ 显示客户详细信息
  - ✅ 显示拜访计划和报告（如果有）

#### 3.4 编辑客户
- 点击"编辑"按钮
- 修改客户信息
- 点击"更新客户"

**预期结果**：
- ✅ 更新成功
- ✅ 列表显示更新后的数据

#### 3.5 创建拜访计划
- 在客户列表中点击"新建拜访"
- 选择日期（今天或明天）
- 点击"创建拜访计划"

**预期结果**：
- ✅ 创建成功
- ✅ 在"计划"页面可以看到

#### 3.6 删除客户
- 点击"删除"按钮
- 确认删除

**预期结果**：
- ✅ 删除成功
- ✅ 客户从列表中移除

### 4. 测试拜访计划页面（⏳ 部分功能）

点击底部导航的"计划"选项

#### 4.1 查看今日计划（✅ 已更新）
- 切换到"日"视图
- **预期结果**：
  - ✅ 显示今天的所有拜访计划
  - ✅ 显示客户信息
  - ✅ 显示状态标签

#### 4.2 查看月历（✅ 已更新）
- 切换到"月"视图
- **预期结果**：
  - ✅ 显示当前月的日历
  - ✅ 有计划的日期显示标记
  - ✅ 点击日期显示当天计划

#### ⚠️ 未更新功能

以下功能还没有更新到新 API，可能会报错：

1. **添加拜访计划**
   - ❌ 从计划页面添加计划功能
   - ✅ 可以从客户页面添加（已更新）

2. **签出功能**
   - ❌ 签出拜访计划

3. **删除计划**
   - ❌ 删除拜访计划

### 5. 测试文章页面（⏳ 未更新）

点击底部导航的"文章"选项

**预期**：
- ⚠️ 可能显示错误或无法正常加载数据
- ❌ 等待更新

### 6. 测试我的页面（⏳ 未更新）

点击底部导航的"我的"选项

**预期**：
- ⚠️ 可能显示错误或无法正常加载数据
- ❌ 等待更新

## 🔍 检查浏览器控制台

打开开发者工具（F12）：

### 正常情况
- ✅ 应该没有红色错误
- ✅ 网络请求应该返回 200 状态码

### 可能的警告（可忽略）
- ⚠️ React 的严格模式警告
- ⚠️ 控制台的一些提示信息

### 如果看到错误

**401 Unauthorized**：
- 检查 token 是否正确保存
- 尝试重新登录

**404 Not Found**：
- 检查后端是否运行
- 检查 API URL 是否正确配置

**Network Error**：
- 检查后端服务器是否运行
- 检查端口是否正确

## 📊 测试数据

数据库已经包含以下测试数据：

1. **管理员用户**
   - admin@example.com / admin123456

2. **测试用户**
   - user@example.com / user123456

3. **测试客户**
   - 名称：测试客户
   - 电话：13800138000
   - 地址：上海市浦东新区世纪大道1000号

4. **测试文章**
   - 标题：欢迎使用拜访管理系统

## 🐛 报告问题

如果遇到问题，请记录：

1. **问题描述**
2. **重现步骤**
3. **浏览器控制台错误信息**
4. **网络请求详情**（Network tab）

## 📝 测试清单

- [ ] 登录功能正常
- [ ] 客户列表加载正常
- [ ] 添加客户功能正常
- [ ] 编辑客户功能正常
- [ ] 删除客户功能正常
- [ ] 查看客户详情正常
- [ ] 创建拜访计划（从客户页面）正常
- [ ] 今日拜访计划显示正常
- [ ] 月历视图显示正常
- [ ] 点击月历日期显示计划正常
- [ ] （可选）测试签到功能
- [ ] （可选）测试报告功能

## 🎯 下一步

完成 PlansPage.tsx 的剩余功能更新后，可以继续测试：
- 添加拜访计划（从计划页面）
- 签出功能
- 删除计划功能
