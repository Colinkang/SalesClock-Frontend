# ğŸ“š æ–‡æ¡£æ€»ç»“

## âœ… å·²ç”Ÿæˆçš„æ–‡æ¡£

### 1. API æ¥å£æ–‡æ¡£
**æ–‡ä»¶**: `backend/API_DOCUMENTATION.md`

**å†…å®¹**:
- å®Œæ•´çš„ API æ¥å£åˆ—è¡¨
- è¯·æ±‚/å“åº”æ ¼å¼
- è®¤è¯æ–¹å¼
- é”™è¯¯å¤„ç†
- æ•°æ®ç±»å‹è¯´æ˜

**æ¶µç›–çš„æ¥å£**:
- âœ… è®¤è¯æ¥å£ï¼ˆç™»å½•ã€æ³¨å†Œã€è·å–ç”¨æˆ·ä¿¡æ¯ï¼‰
- âœ… å®¢æˆ·æ¥å£ï¼ˆCRUDï¼‰
- âœ… æ‹œè®¿è®¡åˆ’æ¥å£ï¼ˆCRUD + ç­¾åˆ°ï¼‰
- âœ… æ‹œè®¿æŠ¥å‘Šæ¥å£ï¼ˆCRUDï¼‰
- âœ… æ–‡ç« æ¥å£ï¼ˆCRUDï¼‰
- âœ… é‚€è¯·æ¥å£ï¼ˆç®¡ç†å‘˜åŠŸèƒ½ï¼‰

### 2. æ•°æ®åº“è¿ç§»æ–‡ä»¶
**æ–‡ä»¶**: `backend/prisma/migrations/20251028065253_init/migration.sql`

**å†…å®¹**:
- 6 ä¸ªæ•°æ®è¡¨
- 2 ä¸ªæšä¸¾ç±»å‹
- å¤šä¸ªç´¢å¼•
- å¤–é”®çº¦æŸ

**åˆ›å»ºçš„è¡¨**:
1. `users` - ç”¨æˆ·è¡¨
2. `invitations` - é‚€è¯·è¡¨
3. `customers` - å®¢æˆ·è¡¨
4. `visit_plans` - æ‹œè®¿è®¡åˆ’è¡¨
5. `visit_reports` - æ‹œè®¿æŠ¥å‘Šè¡¨
6. `articles` - æ–‡ç« è¡¨

**åˆ›å»ºçš„ç±»å‹**:
- `Role` - ç”¨æˆ·è§’è‰²æšä¸¾
- `VisitStatus` - æ‹œè®¿çŠ¶æ€æšä¸¾

### 3. è¿ç§»æŒ‡å—
**æ–‡ä»¶**: `backend/MIGRATION_GUIDE.md`

**å†…å®¹**:
- å¦‚ä½•ä½¿ç”¨è¿ç§»æ–‡ä»¶
- æ•°æ®åº“é…ç½®
- è¿ç§»å‘½ä»¤è¯´æ˜
- å¸¸è§é—®é¢˜è§£ç­”

## ğŸ“Š API æ¥å£æ€»è§ˆ

### åŸºç¡€ä¿¡æ¯
- **Base URL**: `http://localhost:3001/api`
- **è®¤è¯æ–¹å¼**: JWT Bearer Token
- **Content-Type**: `application/json`

### æ¥å£ç»Ÿè®¡
- **è®¤è¯æ¥å£**: 3 ä¸ª
- **å®¢æˆ·æ¥å£**: 5 ä¸ª
- **æ‹œè®¿è®¡åˆ’æ¥å£**: 6 ä¸ª
- **æ‹œè®¿æŠ¥å‘Šæ¥å£**: 5 ä¸ª
- **æ–‡ç« æ¥å£**: 5 ä¸ª
- **é‚€è¯·æ¥å£**: 4 ä¸ª

**æ€»è®¡**: 28 ä¸ªæ¥å£ç«¯ç‚¹

## ğŸ” è®¤è¯æœºåˆ¶

### JWT Token
- é€šè¿‡ç™»å½•æˆ–æ³¨å†Œè·å–
- æœ‰æ•ˆæœŸ: 7 å¤©ï¼ˆå¯é…ç½®ï¼‰
- è¯·æ±‚å¤´æ ¼å¼: `Authorization: Bearer <token>`

### æƒé™æ§åˆ¶
- æ™®é€šæ¥å£: éœ€è¦è®¤è¯
- ç®¡ç†å‘˜æ¥å£: éœ€è¦ `ADMIN` è§’è‰²
- å…¬å¼€æ¥å£: é‚€è¯·éªŒè¯

## ğŸ“ æ•°æ®éš”ç¦»

### ç”¨æˆ·æ•°æ®éš”ç¦»
- å®¢æˆ·æ•°æ®æŒ‰ `createdBy` éš”ç¦»
- æ‹œè®¿è®¡åˆ’æŒ‰ `createdBy` éš”ç¦»
- æ‹œè®¿æŠ¥å‘ŠæŒ‰ `createdBy` éš”ç¦»
- æ–‡ç« æ•°æ®å…¨å±€å¯è§

### çº§è”åˆ é™¤
- åˆ é™¤ç”¨æˆ·ä¼šçº§è”åˆ é™¤å…¶åˆ›å»ºçš„æ‰€æœ‰æ•°æ®
- åˆ é™¤å®¢æˆ·ä¼šçº§è”åˆ é™¤ç›¸å…³æ‹œè®¿è®¡åˆ’å’ŒæŠ¥å‘Š
- åˆ é™¤æ‹œè®¿è®¡åˆ’ä¼šçº§è”åˆ é™¤ç›¸å…³æŠ¥å‘Š

## ğŸ—„ï¸ æ•°æ®åº“ç»“æ„

### è¡¨å…³ç³»å›¾

```
users (1)
  â”œâ”€â”€ customers (N) [created_by]
  â”œâ”€â”€ visit_plans (N) [created_by]
  â”œâ”€â”€ visit_reports (N) [created_by]
  â”œâ”€â”€ articles (N) [created_by]
  â””â”€â”€ invitations (N) [invited_by]

customers (1)
  â”œâ”€â”€ visit_plans (N) [customer_id]
  â””â”€â”€ visit_reports (N) [customer_id]

visit_plans (1)
  â””â”€â”€ visit_reports (N) [visit_plan_id]
```

### ç´¢å¼•ç­–ç•¥

ä¸ºä»¥ä¸‹å­—æ®µåˆ›å»ºäº†ç´¢å¼•ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ï¼š
- å”¯ä¸€å­—æ®µï¼ˆemail, tokenï¼‰
- å¤–é”®å­—æ®µï¼ˆcreated_by, customer_id, visit_plan_idï¼‰
- æŸ¥è¯¢å­—æ®µï¼ˆplanned_date, status, accepted_at, created_atï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é…ç½®æ•°æ®åº“

```bash
# åœ¨ backend/.env ä¸­é…ç½®
DATABASE_URL="postgresql://username:password@localhost:5432/visitdb"
JWT_SECRET="your-secret-key"
PORT=3001
FRONTEND_URL="http://localhost:5173"
```

### 2. è¿è¡Œè¿ç§»

```bash
cd backend
npx prisma migrate dev
```

### 3. å¯åŠ¨åç«¯

```bash
npm run dev
```

### 4. æµ‹è¯• API

```bash
# ç™»å½•
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"user@example.com","password":"password123"}'

# è·å–å®¢æˆ·åˆ—è¡¨ï¼ˆéœ€è¦ tokenï¼‰
curl http://localhost:3001/api/customers \
  -H "Authorization: Bearer <your-token>"
```

## ğŸ“– å…¶ä»–ç›¸å…³æ–‡æ¡£

- `README.md` - é¡¹ç›®æ•´ä½“è¯´æ˜
- `MIGRATION_GUIDE.md` - ä» Supabase è¿ç§»æŒ‡å—
- `FRONTEND_UPDATE_GUIDE.md` - å‰ç«¯æ›´æ–°æŒ‡å—
- `TESTING_GUIDE.md` - æµ‹è¯•æŒ‡å—
- `BACKEND_READY.md` - åç«¯å‡†å¤‡çŠ¶æ€

## ğŸ¯ ä¸‹ä¸€æ­¥

1. âœ… å®Œæˆ API æ–‡æ¡£
2. âœ… ç”Ÿæˆæ•°æ®åº“è¿ç§»
3. â³ é…ç½®æ•°æ®åº“å¹¶è¿è¡Œè¿ç§»
4. â³ å¯åŠ¨åç«¯æœåŠ¡å™¨
5. â³ æµ‹è¯•æ‰€æœ‰æ¥å£
6. â³ æ›´æ–°å‰ç«¯é¡µé¢

## ğŸ’¡ æç¤º

- API æ–‡æ¡£ä½¿ç”¨ Markdown æ ¼å¼ï¼Œæ˜“äºé˜…è¯»å’Œç»´æŠ¤
- è¿ç§»æ–‡ä»¶æ˜¯çº¯ SQLï¼Œå¯ä»¥ç›´æ¥åœ¨ PostgreSQL ä¸­æ‰§è¡Œ
- æ‰€æœ‰æ–‡æ¡£éƒ½åŒ…å«è¯¦ç»†çš„ç¤ºä¾‹å’Œè¯´æ˜
- å»ºè®®å®šæœŸæ›´æ–°æ–‡æ¡£ä»¥ä¿æŒä¸ä»£ç åŒæ­¥

